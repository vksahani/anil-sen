<section class="experience section" #experienceSection>
      <div class="container">
        <div class="section-header" [@fadeInUp]>
          <h2 class="section-title">Work Experience</h2>
          <p class="section-subtitle">My professional journey and key achievements</p>
        </div>

        <div class="experience-grid">
          @for (exp of experience(); track exp.id) {
            <div 
              class="experience-card"
              [class.visible]="isVisible()"
              (click)="openExperienceModal(exp)">
              
              <div class="experience-header">
                <div class="company-logo">
                  <img [src]="exp.icon" [alt]="exp.company + ' logo'" class="logo-image">
                </div>
                
                <div class="experience-status">
                  <span class="status-badge" [attr.data-status]="exp.endDate ? 'completed' : 'current'">
                    {{ exp.endDate ? 'Past Role' : 'Current' }}
                  </span>
                </div>
              </div>

              <div class="experience-content">
                <div class="experience-title-section">
                  <h3 class="position">{{ exp.position }}</h3>
                  <h4 class="company">{{ exp.company }}</h4>
                  <div class="duration">
                    <span class="date">{{ formatDate(exp.startDate) }} - {{ exp.endDate ? formatDate(exp.endDate) : 'Present' }}</span>
                    <span class="location">{{ exp.location }}</span>
                  </div>
                </div>

                <p class="description lh-sm">{{ exp.description }}</p>

                <div class="tech-stack">
                  @for (tech of exp.technologies.slice(0, 4); track tech) {
                    <span class="tech-tag">{{ tech }}</span>
                  }
                  @if (exp.technologies.length > 4) {
                    <span class="tech-more">
                      +{{ exp.technologies.length - 4 }} more
                    </span>
                  }
                </div>

                <div class="experience-highlights">
                  @for (achievement of exp.achievements.slice(0, 2); track achievement) {
                    <div class="highlight-item">
                      <span class="highlight-icon">üèÜ</span>
                      <span class="highlight-text">{{ achievement }}</span>
                    </div>
                  }
                </div>



                <div class="view-details">
                  <button class="details-btn" type="button">
                    <span>View Details</span>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M7 17L17 7M17 7H7M17 7V17"/>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          }
        </div>

        <div class="experience-summary" [@fadeInUp]>
          <div class="summary-stats">
            <div class="stat-item">
              <div class="stat-number">{{ getTotalExperience() }}</div>
              <div class="stat-label">Years Experience</div>
            </div>
            
            <div class="stat-item">
              <div class="stat-number">{{ experience().length }}</div>
              <div class="stat-label">Companies</div>
            </div>
            
            <div class="stat-item">
              <div class="stat-number">{{ getTotalProjects() }}</div>
              <div class="stat-label">Projects Delivered</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Experience Modal -->
    @if (selectedExperience()) {
      <div 
        class="experience-modal" 
        [class.active]="selectedExperience()"
        (click)="closeExperienceModal()">
        
        <div class="modal-content" (click)="$event.stopPropagation()" [@scaleIn]>
          <button 
            class="modal-close" 
            (click)="closeExperienceModal()"
            aria-label="Close experience details"
            type="button">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"/>
              <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
          </button>

          <div class="modal-header d-flex flex-column align-items-center">
            <div class="company-info">
              <div class="company-logo-large">
                <img [src]="selectedExperience()!.icon" [alt]="selectedExperience()!.company + ' logo'" *ngIf="selectedExperience()!.icon" class="logo-image-large">
                <div class="logo-placeholder-large" *ngIf="!selectedExperience()!.icon">
                  {{ selectedExperience()!.company.charAt(0) }}
                </div>
              </div>
              <div class="title-info">
                <h2>{{ selectedExperience()!.position }}</h2>
                <h3>{{ selectedExperience()!.company }}</h3>
                <div class="duration-location">
                  <span class="duration">
                    {{ formatDate(selectedExperience()!.startDate) }} - 
                    {{ selectedExperience()!.endDate ? formatDate(selectedExperience()!.endDate!) : 'Present' }}
                  </span>
                  <span class="location">{{ selectedExperience()!.location }}</span>
                </div>
              </div>
            </div>
            
            <div class="modal-badges">
              <span class="status-badge" [attr.data-status]="selectedExperience()!.endDate ? 'completed' : 'current'">
                {{ selectedExperience()!.endDate ? 'Past Role' : 'Current Position' }}
              </span>
            </div>
          </div>

          <div class="modal-body">
            <div class="modal-details">
              <div class="experience-description-full">
                <h3>About This Role</h3>
                <p class="lh-sm">{{ selectedExperience()!.description }}</p>
              </div>

              @if (selectedExperience()!.responsibilities && selectedExperience()!.responsibilities.length) {
                <div class="experience-responsibilities">
                  <h3>Key Responsibilities</h3>
                  <ul class="lh-sm">
                    @for (responsibility of selectedExperience()!.responsibilities; track responsibility) {
                      <li>{{ responsibility }}</li>
                    }
                  </ul>
                </div>
              }

              @if (selectedExperience()!.achievements && selectedExperience()!.achievements.length) {
                <div class="experience-achievements">
                  <h3>Key Achievements</h3>
                  <ul class="lh-sm">
                    @for (achievement of selectedExperience()!.achievements; track achievement) {
                      <li>{{ achievement }}</li>
                    }
                  </ul>
                </div>
              }

              @if (selectedExperience()!.technologies && selectedExperience()!.technologies.length) {
                <div class="experience-tech-full">
                  <h3>Technologies & Tools</h3>
                  <div class="tech-grid">
                    @for (tech of selectedExperience()!.technologies; track tech) {
                      <span class="tech-tag">{{ tech }}</span>
                    }
                  </div>
                </div>
              }

              @if (selectedExperience()!.companyUrl) {
                <div class="experience-actions-full">
                  <a 
                    [href]="selectedExperience()!.companyUrl" 
                    target="_blank" 
                    rel="noopener noreferrer"
                    class="btn btn-primary">
                    <span>Visit Company</span>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                      <polyline points="15,3 21,3 21,9"/>
                      <line x1="10" y1="14" x2="21" y2="3"/>
                    </svg>
                  </a>
                </div>
              }
            </div>
          </div>
        </div>
      </div>
    }